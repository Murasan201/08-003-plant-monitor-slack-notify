# 要件定義書：植物の状態をセンサーで観察してSlackに通知するアプリ

## 1. アプリケーション概要
本アプリケーションは、室内で栽培する観葉植物の土壌水分を定期的に計測し、その結果をSlackに通知するシステムです。Raspberry Pi 5を用いて土壌水分センサーからデータを取得し、一定間隔ごとにSlackへ自動通知します。利用者は、植物の状態をリモートで把握でき、適切な水やりのタイミングを判断できます。

## 2. 利用対象
- 観葉植物を育てる初心者～中級者
- IoTや電子工作に関心のある入門者
- プログラミング学習や実用的なRaspberry Pi活用例を知りたい人

## 3. 使用デバイスおよび部品
- **マイコン**: Raspberry Pi 5
- **センサー**: 容量式土壌水分センサー（SunFounder Ultimate Sensor Kit付属）
  - 製品ドキュメント: https://docs.sunfounder.com/projects/ultimate-sensor-kit/ja/latest/components_basic/10-component_soil.html
  - 使用IC: 555タイマーIC（NE555/LM555、DIL8パッケージ）
  - 動作原理: 555タイマーICが発振回路を構成し、土壌の静電容量変化を検出。水分量に応じて容量が変化すると発振周波数が変わり、それをアナログ電圧として出力する。555タイマーICは安価で入手性が良く、容量式土壌水分センサーで広く採用されている業界標準的な設計。
- **ADコンバータ**: ADS1015 (I²C接続)
- **通知先**: Slack（WebHook URLを利用）
- **電源仕様**: ADS1015および土壌水分センサーはともに**3.3V駆動**とする

## 4. 機能要件
1. **データ取得**  
   - ADS1015を介して土壌水分センサーからアナログ値を取得する。  
   - 測定値を0～100%に正規化し、理解しやすい形式で表示する。

2. **定期計測**  
   - 30分ごとに自動計測を行う。  
   - 計測はバックグラウンドで動作し、ユーザー操作不要とする。

3. **通知機能**  
   - 計測した水分値をSlackの指定チャンネルに送信する。  
   - 通知にはSlackのIncoming WebHookを利用する。  
   - メッセージ形式は「植物の土壌水分：XX%（日時）」とする。

4. **エラー処理**  
   - センサーや通信に異常があった場合はSlackにエラーメッセージを送信する。

## 5. 非機能要件
- **使いやすさ**: 初心者が数ステップで環境構築できるように、設定ファイルやサンプルコードを提供する。
- **拡張性**: 将来的に温度や湿度など他のセンサーを追加できる設計とする。
- **信頼性**: 定期タスクの実行漏れを防ぐため、cronやPythonスケジューラを活用する。

## 6. 入出力
- **入力**: 土壌水分センサー値（ADS1015経由のアナログ入力、3.3V駆動）
- **出力**: Slack通知メッセージ

## 7. 想定される利用シナリオ
1. Raspberry Piを起動し、プログラムを常駐実行する。  
2. ユーザーはSlackで「植物の土壌水分：45%（2025-09-26 14:00）」といった通知を受け取る。  
3. 水分が低い場合、Slack通知を参考にユーザーが水やりを実施する。

---
この要件定義に基づき、次の段階ではアーキテクチャ設計・回路図・Python実装を順次進めます。

